{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Niki PC/Documents/GitHub/react-priateli.online/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Niki PC/Documents/GitHub/react-priateli.online/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Cart}from\"./cart/Cart\";import{MenuSection}from\"./menu/MenuSection\";import{useEffect,useState}from\"react\";import{ItemsInCart}from'./contexts/ItemsInCart';import{Form}from'./form/Form';import{sendClientDataFetch}from\"./dataSendServices/sendClientDataFetch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Service=function Service(_ref){var getIndex=_ref.getIndex;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),itemForCart=_useState2[0],setItemForCart=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFormActive=_useState4[0],setFormActive=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),clientData=_useState6[0],setClientData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDataRedyToSend=_useState8[0],setIsDataRedyToSend=_useState8[1];useEffect(function(){getIndex(itemForCart);},[itemForCart]);var addToCartClickHandler=function addToCartClickHandler(currentElement){currentElement.isRendered=true;setItemForCart(function(oldArr){return[].concat(_toConsumableArray(oldArr),[currentElement]);});};var deleteFromCart=function deleteFromCart(currentElement){currentElement.isRendered=false;setItemForCart(itemForCart.filter(function(x){return x.isRendered===true;}));};var activateForm=function activateForm(){setFormActive(!isFormActive);};var purchase=function purchase(clientData){setClientData(clientData);setIsDataRedyToSend(true);};if(isDataRedyToSend){sendClientDataFetch(clientData);}return/*#__PURE__*/_jsxs(ItemsInCart.Provider,{value:itemForCart,children:[/*#__PURE__*/_jsx(Cart,{deleteFromCart:deleteFromCart,activateForm:activateForm}),isFormActive&&/*#__PURE__*/_jsx(Form,{purchase:purchase}),/*#__PURE__*/_jsx(MenuSection,{addToCartClickHandler:addToCartClickHandler})]});};","map":{"version":3,"names":["Cart","MenuSection","useEffect","useState","ItemsInCart","Form","sendClientDataFetch","Service","getIndex","itemForCart","setItemForCart","isFormActive","setFormActive","clientData","setClientData","isDataRedyToSend","setIsDataRedyToSend","addToCartClickHandler","currentElement","isRendered","oldArr","deleteFromCart","filter","x","activateForm","purchase"],"sources":["C:/Users/Niki PC/Documents/GitHub/react-priateli.online/src/components/Service.js"],"sourcesContent":["import { Cart } from \"./cart/Cart\"\r\nimport { MenuSection } from \"./menu/MenuSection\"\r\nimport { useEffect, useState} from \"react\"\r\nimport { ItemsInCart } from './contexts/ItemsInCart'\r\nimport { Form } from './form/Form'\r\nimport { sendClientDataFetch } from \"./dataSendServices/sendClientDataFetch\"\r\n\r\nexport const Service = ({getIndex}) => {\r\n    let [itemForCart, setItemForCart] = useState([]);\r\n    let [isFormActive, setFormActive] = useState(false);\r\n    let [clientData, setClientData] = useState({});\r\n    let [isDataRedyToSend, setIsDataRedyToSend] = useState(false);\r\n    useEffect(()=>{getIndex(itemForCart)},[itemForCart]);\r\n\r\n    const addToCartClickHandler = (currentElement) => {\r\n        currentElement.isRendered = true;\r\n        setItemForCart(oldArr => [...oldArr, currentElement]);\r\n    }\r\n\r\n    const deleteFromCart = (currentElement) => {\r\n        currentElement.isRendered = false;\r\n        setItemForCart(itemForCart.filter(x => x.isRendered === true));\r\n    }\r\n\r\n    const activateForm = () => {\r\n        setFormActive(!isFormActive);\r\n    }\r\n    \r\n    const purchase = (clientData) => {\r\n        setClientData(clientData);\r\n        setIsDataRedyToSend(true);\r\n    }\r\n\r\n    if(isDataRedyToSend){\r\n        sendClientDataFetch(clientData);\r\n    }\r\n    \r\n    return (\r\n        <ItemsInCart.Provider value={itemForCart}>\r\n            <Cart deleteFromCart={deleteFromCart} activateForm={activateForm} />\r\n            {isFormActive && <Form purchase={purchase} />}\r\n            <MenuSection addToCartClickHandler={addToCartClickHandler} />\r\n        </ItemsInCart.Provider>\r\n    )\r\n}"],"mappings":"kSAAA,OAASA,IAAT,KAAqB,aAArB,CACA,OAASC,WAAT,KAA4B,oBAA5B,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAmC,OAAnC,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAASC,IAAT,KAAqB,aAArB,CACA,OAASC,mBAAT,KAAoC,wCAApC,C,wFAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,MAAgB,IAAdC,SAAc,MAAdA,QAAc,CACnC,cAAoCL,QAAQ,CAAC,EAAD,CAA5C,wCAAKM,WAAL,eAAkBC,cAAlB,eACA,eAAoCP,QAAQ,CAAC,KAAD,CAA5C,yCAAKQ,YAAL,eAAmBC,aAAnB,eACA,eAAkCT,QAAQ,CAAC,EAAD,CAA1C,yCAAKU,UAAL,eAAiBC,aAAjB,eACA,eAA8CX,QAAQ,CAAC,KAAD,CAAtD,yCAAKY,gBAAL,eAAuBC,mBAAvB,eACAd,SAAS,CAAC,UAAI,CAACM,QAAQ,CAACC,WAAD,CAAR,CAAsB,CAA5B,CAA6B,CAACA,WAAD,CAA7B,CAAT,CAEA,GAAMQ,sBAAqB,CAAG,QAAxBA,sBAAwB,CAACC,cAAD,CAAoB,CAC9CA,cAAc,CAACC,UAAf,CAA4B,IAA5B,CACAT,cAAc,CAAC,SAAAU,MAAM,qCAAQA,MAAR,GAAgBF,cAAhB,IAAP,CAAd,CACH,CAHD,CAKA,GAAMG,eAAc,CAAG,QAAjBA,eAAiB,CAACH,cAAD,CAAoB,CACvCA,cAAc,CAACC,UAAf,CAA4B,KAA5B,CACAT,cAAc,CAACD,WAAW,CAACa,MAAZ,CAAmB,SAAAC,CAAC,QAAIA,EAAC,CAACJ,UAAF,GAAiB,IAArB,EAApB,CAAD,CAAd,CACH,CAHD,CAKA,GAAMK,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBZ,aAAa,CAAC,CAACD,YAAF,CAAb,CACH,CAFD,CAIA,GAAMc,SAAQ,CAAG,QAAXA,SAAW,CAACZ,UAAD,CAAgB,CAC7BC,aAAa,CAACD,UAAD,CAAb,CACAG,mBAAmB,CAAC,IAAD,CAAnB,CACH,CAHD,CAKA,GAAGD,gBAAH,CAAoB,CAChBT,mBAAmB,CAACO,UAAD,CAAnB,CACH,CAED,mBACI,MAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEJ,WAA7B,wBACI,KAAC,IAAD,EAAM,cAAc,CAAEY,cAAtB,CAAsC,YAAY,CAAEG,YAApD,EADJ,CAEKb,YAAY,eAAI,KAAC,IAAD,EAAM,QAAQ,CAAEc,QAAhB,EAFrB,cAGI,KAAC,WAAD,EAAa,qBAAqB,CAAER,qBAApC,EAHJ,GADJ,CAOH,CArCM"},"metadata":{},"sourceType":"module"}